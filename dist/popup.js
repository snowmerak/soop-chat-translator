import{D as I}from"./chunks/defaults-BGNKfFu1.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();const l=document.getElementById("enableToggle"),d=document.getElementById("targetLang"),u=document.getElementById("maxConcurrent"),m=document.getElementById("apiBaseInput"),p=document.getElementById("modelInput"),v=document.getElementById("modelList"),f=document.getElementById("apiKeyInput"),h=document.getElementById("statusDot"),L=document.getElementById("statusText");function S(e){l.checked=e.enabled,d.value=e.targetLang,u.value=e.maxConcurrentRequests.toString(),m.value=e.apiBase,p.value=e.model,f.value=e.apiKey,B(e.enabled),T(e.apiBase,e.apiKey)}function B(e){e?(h.classList.add("active"),L.textContent="번역 중"):(h.classList.remove("active"),L.textContent="비활성화됨")}async function T(e,a){if(e)try{const o={"Content-Type":"application/json"};a&&(o.Authorization=`Bearer ${a}`);const c=e.replace(/\/$/,"")+"/v1/models",t=await fetch(c,{headers:o});if(!t.ok)return;const n=await t.json(),r=Array.isArray(n.data)?n.data:[];v.innerHTML="";for(const i of r)if(i&&i.id){const y=document.createElement("option");y.value=i.id,v.appendChild(y)}}catch(o){console.log("[SOOP Translator] Failed to fetch models:",o)}}function s(e){chrome.storage.local.get(I,a=>{const o={...a,...e};chrome.storage.local.set(o)})}chrome.storage.local.get(I,e=>{S(e)});l.addEventListener("change",()=>{const e=l.checked;s({enabled:e}),B(e)});d.addEventListener("change",()=>{s({targetLang:d.value})});u.addEventListener("change",()=>{s({maxConcurrentRequests:parseInt(u.value,10)})});let E;function g(){clearTimeout(E),E=window.setTimeout(()=>{const e=m.value.trim(),a=p.value.trim(),o=f.value.trim();s({apiBase:e,model:a,apiKey:o}),T(e,o)},500)}m.addEventListener("input",g);p.addEventListener("input",g);f.addEventListener("input",g);
