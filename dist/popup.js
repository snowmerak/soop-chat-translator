import{D as B}from"./chunks/defaults-hrsvWvRM.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();const u=document.getElementById("enableToggle"),d=document.getElementById("sourceLang"),i=document.getElementById("targetLang"),m=document.getElementById("maxConcurrent"),p=document.getElementById("apiBaseInput"),f=document.getElementById("modelInput"),L=document.getElementById("modelList"),g=document.getElementById("apiKeyInput"),h=document.getElementById("statusDot"),E=document.getElementById("statusText");function b(e){u.checked=e.enabled,d.value=e.sourceLang||"Auto",i.value=e.targetLang,m.value=e.maxConcurrentRequests.toString(),p.value=e.apiBase,f.value=e.model,g.value=e.apiKey,S(e.enabled),T(e.apiBase,e.apiKey)}function S(e){e?(h.classList.add("active"),E.textContent="번역 중"):(h.classList.remove("active"),E.textContent="비활성화됨")}async function T(e,a){if(e)try{const o={"Content-Type":"application/json"};a&&(o.Authorization=`Bearer ${a}`);const s=e.replace(/\/$/,"")+"/v1/models",t=await fetch(s,{headers:o});if(!t.ok)return;const n=await t.json(),r=Array.isArray(n.data)?n.data:[];L.innerHTML="";for(const l of r)if(l&&l.id){const v=document.createElement("option");v.value=l.id,L.appendChild(v)}}catch(o){console.log("[SOOP Translator] Failed to fetch models:",o)}}function c(e){chrome.storage.local.get(B,a=>{const o={...a,...e};chrome.storage.local.set(o)})}chrome.storage.local.get(B,e=>{b(e)});u.addEventListener("change",()=>{const e=u.checked;c({enabled:e}),S(e)});i.addEventListener("change",()=>{c({targetLang:i.value})});d.addEventListener("change",()=>{c({sourceLang:d.value})});m.addEventListener("change",()=>{c({maxConcurrentRequests:parseInt(m.value,10)})});let I;function y(){clearTimeout(I),I=window.setTimeout(()=>{const e=p.value.trim(),a=f.value.trim(),o=g.value.trim();c({apiBase:e,model:a,apiKey:o}),T(e,o)},500)}p.addEventListener("input",y);f.addEventListener("input",y);g.addEventListener("input",y);
